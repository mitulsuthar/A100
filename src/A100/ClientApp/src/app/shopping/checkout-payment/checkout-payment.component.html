<div class="row">
  <div class="col-lg-12">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="d-flex justify-content-center">
        <div>
          <h4>Credit Card Info</h4>
          <div formGroupName="cardInfo">
            <div class="form-group">
              <label class="center-block">Name on card:
                <input class="form-control" formControlName="NameOnCard">
              </label>
              <div *ngIf="isFieldValid('cardInfo.NameOnCard')">
                <span class="text-danger">Name is required.</span>
              </div>
            </div>
            <div class="form-group">
              <label class="center-block">Card Type:
                </label>
                  <select class="form-control" formControlName="CardType" name="cardType" id="cardType">                    
                      <option *ngFor="let cardType of cardTypes" [ngValue]='cardType'>
                        {{cardType}}
                      </option>
                    </select>
              <div *ngIf="isFieldValid('cardInfo.CardType')">
                <span class="text-danger">Card Type is required.</span>
              </div>
            </div>
            <div class="form-group">
              <label class="center-block">Card Number:
                <input class="form-control" formControlName="CardNumber">
              </label>
              <div *ngIf="isFieldValid('cardInfo.CardNumber')">
                <span *ngIf="form.get('cardInfo.CardNumber').hasError('required')" class="text-danger">Card Number is required.</span>
                <span *ngIf="!form.get('cardInfo.CardNumber').hasError('required') && 
                form.get('cardInfo.CardNumber').hasError('pattern')" class="text-danger">Card number can contain only digits.</span>
              </div>
            </div>
            <div formGroupName="ExpirationDate">
              <div class="d-flex flex-row">
                <div class="form-group">
                  <label for="expirationMonth" class="center-block">Month</label>
                  <select class="form-control" formControlName="ExpirationMonth" name="expirationMonth" id="expirationMonth">                    
                    <option *ngFor="let month of months" [ngValue]='month'>
                      {{month}}
                    </option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="expirationYear" class="center-block">Year</label>
                  <select class="form-control" formControlName="ExpirationYear" name="expirationYear" id="expirationYear">                    
                    <option *ngFor="let year of years" [ngValue]='year'>
                      {{year}}
                    </option>
                  </select>
                </div>
              </div>
              <div *ngIf="isFieldValid('cardInfo.ExpirationDate.ExpirationMonth')">
                  <span class="text-danger" 
                  *ngIf="form.get('cardInfo.ExpirationDate.ExpirationMonth').hasError('required')">Expiration Month is required.</span>
              </div>
              <div *ngIf="isFieldValid('cardInfo.ExpirationDate.ExpirationYear')">
                  <span class="text-danger"
                  *ngIf="form.get('cardInfo.ExpirationDate.ExpirationYear').hasError('required')">Expiration Year is required.</span>
              </div>
              <div *ngIf="isFieldValid('cardInfo.ExpirationDate')">
                  <span class="text-danger"
                  *ngIf="form.get('cardInfo.ExpirationDate').hasError('expirationDate')">Expiration Month should be greater than current month.</span>
              </div>
            </div>
            <div class="form-group">
              <label class="center-block">Security Code:
                <input class="form-control" formControlName="SecurityCode">
              </label>
              <div *ngIf="isFieldValid('cardInfo.SecurityCode')">
                <span class="text-danger"
                *ngIf="form.get('cardInfo.SecurityCode').hasError('required')">Security Code is required.</span>
                <span class="text-danger"
                *ngIf="form.get('cardInfo.SecurityCode').hasError('pattern')">Security Code can contain only 3 digits.</span>
              </div>
            </div>
          </div>
          <h4>Billing Address</h4>
          <div formGroupName="billingAddress">
            <div class="form-group">
              <label class="center-block">Street:
                <input class="form-control" formControlName="Street">
              </label>
              <div *ngIf="isFieldValid('billingAddress.Street')">
                <span class="text-danger">Street is required.</span>
              </div>
            </div>
            <div class="form-group">
              <label class="center-block">City:
                <input class="form-control" formControlName="City">
              </label>
              <div *ngIf="isFieldValid('billingAddress.City')">
                <span class="text-danger">City is required.</span>
              </div>
            </div>
            <div class="form-group">
              <label class="center-block">State:
                <input class="form-control" formControlName="State">
              </label>
              <div *ngIf="isFieldValid('billingAddress.State')">
                <span class="text-danger">State is required.</span>
              </div>
            </div>
            <div class="form-group">
              <label class="center-block">Zip:
                <input class="form-control" formControlName="Zip">
              </label>
              <div *ngIf="isFieldValid('billingAddress.Zip')">
                <span class="text-danger">Zip is required.</span>
              </div>
            </div>
          </div>
          <div>
            <a class="btn btn-primary float-left" [routerLink]="['/checkout/shippinginfo']" routerLinkActive="router-link-active">Previous</a>
            <button class="btn btn-warning float-right" type="submit">Next</button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>